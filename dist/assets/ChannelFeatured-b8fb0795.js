import{r as s,C as $,a as t,j as m,L as y}from"./index-4483838d.js";import{R as Y}from"./index-325fa521.js";import{f as N}from"./api-8804df91.js";import{f as j}from"./index-307d66e5.js";import{N as V}from"./index-f28fc07c.js";import{i as q,l as T}from"./index-f60fa138.js";import{d as z}from"./MoreVert-a588e145.js";import{S as _}from"./index-26f5842a.js";/* empty css                 */import{I as L}from"./Live-d55b4f49.js";import W from"./VideoLengthTimer-41ed4197.js";import{S as I}from"./ArrowForward-1dbd89a4.js";import"./axios-aba6f0e0.js";const O=()=>{var c,n,f,d,x,w,a,u,o,g,b;const{channelData:e}=s.useContext($),[l,h]=s.useState(""),[r,p]=s.useState([]);s.useEffect(()=>{i()},[l]);const i=async()=>{var k,E,C,S;const v=await N(`videos?part=snippet&part=statistics&id=${(E=(k=e==null?void 0:e.brandingSettings)==null?void 0:k.channel)==null?void 0:E.unsubscribedTrailer}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);p(v==null?void 0:v.items[0]),h(j(new Date((S=(C=v==null?void 0:v.items[0])==null?void 0:C.snippet)==null?void 0:S.publishedAt)))};return t("div",{className:"flex py-6 justify-center sm:w-[calc(100%-3rem)] md:justify-start md:w-[40rem] lg:w-[50rem] xl:w-[61rem] 2xl:w-auto mx-auto",children:m("div",{className:"featuredTop | w-min md:w-full  flex flex-col md:flex-row gap-4 xl:gap-6",children:[t("div",{className:"unsubTrailer | w-[calc(100vw-3rem)] sm:w-[26.5rem] md:min-w-[26.5rem] h-full flex justify-between items-center rounded-xl overflow-hidden",children:t(Y,{id:"player",url:`https://www.youtube.com/embed/${(n=(c=e==null?void 0:e.brandingSettings)==null?void 0:c.channel)==null?void 0:n.unsubscribedTrailer}`,controls:!0,playing:!0,width:"100%",height:"100%",outline:"none"})}),m("div",{className:"details |  md:min-w-0   lg:max-w-[400px] flex flex-col gap-4",children:[t(y,{className:"text-[#0f0f0f] dark:text-[#f1f1f1]",to:`/video/${(d=(f=e==null?void 0:e.brandingSettings)==null?void 0:f.channel)==null?void 0:d.unsubscribedTrailer}`,children:t("h2",{className:"text-sm font-medium line-clamp lg:line-clamp-0",children:(x=r==null?void 0:r.snippet)==null?void 0:x.title})}),m("p",{className:"text-xs text-[#606060] dark:text-[#aaaaaa]",children:[`${Intl.NumberFormat().format((w=r==null?void 0:r.statistics)==null?void 0:w.viewCount)} views`,t("span",{className:'before:content-["•"] before:leading-3 before:text-xs before:mx-1 relative before:top-[-10px] ',children:`${l} ago`})]}),m("div",{className:"md:flex flex-col hidden",children:[t(y,{to:`/video/${(u=(a=e==null?void 0:e.brandingSettings)==null?void 0:a.channel)==null?void 0:u.unsubscribedTrailer}`,className:" text-[#0f0f0f] dark:text-[#f1f1f1]",children:t("p",{className:"description line-clamp-7 | whitespace-pre-wrap text-sm ",children:(o=r==null?void 0:r.snippet)==null?void 0:o.description})}),t(y,{to:`/video/${(b=(g=e==null?void 0:e.brandingSettings)==null?void 0:g.channel)==null?void 0:b.unsubscribedTrailer}`,className:"text-xs font-medium uppercase text-[#606060] dark:text-[#f1f1f1] hover:text-[#0f0f0f] dark:hover:text-[#f1f1f1]",children:"Read More"})]})]})]})})},B=({video:e})=>{var w,a,u,o,g,b,v,k,E,C;const{mouseUpAction:l,mouseDownAction:h}=s.useContext($),[r,p]=s.useState(!1),[i,c]=s.useState([]),[n,f]=s.useState("");s.useEffect(()=>{d(e.contentDetails.videoId),x(e.snippet.publishedAt)},[e.id]);const d=async S=>{var P;try{const A=await N(`videos?part=statistics&part=contentDetails&id=${S}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);p(V((P=A.items[0].statistics)==null?void 0:P.viewCount,1)),await c(q({start:0,end:T.toSeconds(T.parse(A.items[0].contentDetails.duration))*1e3}))}catch{console.log("Error getting VideoStats or videoData")}},x=S=>{const P=j(new Date(S));f(P)};return t("div",{className:" flex justify-between video_card ",children:m("div",{className:" group flex flex-col w-full",children:[t(y,{className:"max-w-full",to:`/video/${(w=e==null?void 0:e.contentDetails)==null?void 0:w.videoId}`,children:m("div",{className:"thumbnail relative bg-[#e5e5e5] dark:bg-[#272727] rounded-[12px]   aspect-video",children:[t("img",{loading:"lazy",src:((o=(u=(a=e==null?void 0:e.snippet)==null?void 0:a.thumbnails)==null?void 0:u.maxres)==null?void 0:o.url)||((v=(b=(g=e==null?void 0:e.snippet)==null?void 0:g.thumbnails)==null?void 0:b.medium)==null?void 0:v.url),alt:"",className:"w-full rounded-[12px] aspect-video  bg-[#e5e5e5] dark:bg-[#272727] border-[#272727]"})||t(_,{circle:!0,width:"36px",height:"36px",baseColor:document.documentElement.classList.contains("dark")?"#272727":"#e5e5e5",enableAnimation:!1}),((k=e.snippet)==null?void 0:k.liveBroadcastContent)==="live"?t(L,{}):t(W,{time:i})]})}),t("div",{className:"details flex gap-4 mt-2",children:m("div",{className:"flex flex-col justify-between leading-snug w-full relative",children:[m("div",{className:"flex mb-1 pr-7",children:[t(y,{className:"w-full ",title:e==null?void 0:e.snippet.title,to:`/video/${(E=e==null?void 0:e.contentDetails)==null?void 0:E.videoId}`,children:t("div",{className:"flex w-full",children:t("p",{className:"line-clamp font-medium w-full text-sm text-[#0f0f0f] dark:text-white",children:r?(C=e==null?void 0:e.snippet)==null?void 0:C.title:t(_,{baseColor:document.documentElement.classList.contains("dark")?"#272727":"#e5e5e5",height:"1.25rem",enableAnimation:!1})})})}),t("div",{className:"button | h-fit ",children:t("button",{className:" js_EventBtn | opacity-0 group-hover:opacity-100 absolute top-[-18%] right-[-4%] w-[35.7px] h-[35.7px] rounded-full flex items-center justify-center  border-transparent  active:bg-[rgba(227,227,227,0.7)] dark:active:bg-[rgba(39,39,39,0.7)] border-[1px]",onMouseUp:l,onMouseDown:h,children:t(z,{className:"text-black dark:text-white  pointer-events-none"})})})]}),t("div",{className:"flex flex-col text-[#606060] dark:text-[#aaaaaa] text-xs  ",children:r&&m("p",{children:[m("span",{className:"",children:[`${r} `,"views"]}),t("span",{className:'before:content-["•"] before:leading-3 before:text-xs before:mx-1 relative before:top-[-10px]',children:`${n} ago`})]})})]})})]})})},U=({playlistId:e,playlistTitle:l})=>{const{channelData:h}=s.useContext($),[r,p]=s.useState([]),[i,c]=s.useState(0),[n,f]=s.useState(2),[d,x]=s.useState(null);s.useEffect(()=>{w()},[h]),s.useEffect(()=>{(()=>{d!==null&&(i===n-1?d.style.transform=`translateX(-${100/(n/i)}%)`:d.style.transform=`translateX(${i<=0?"0":-100*i/n}%)`)})()},[i]),s.useEffect(()=>{const a=()=>{const u=document.querySelector(".sliderContainer").offsetWidth,o=document.querySelector(".slider").offsetWidth;f(Math.round(o/u)),n>1?i>=n&&c(n-1):i<0&&c(0)};return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),s.useEffect(()=>{const a=document.querySelector(".sliderContainer").offsetWidth,u=document.querySelector(".slider").offsetWidth;f(Math.round(u/a))},[r]),s.useEffect(()=>{n>1?i>=n&&c(n-1):i<0&&c(0)},[n]);const w=async()=>{try{const a=await N(`playlistItems?part=snippet&part=contentDetails&playlistId=${e}&maxResults=12&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);p(a.items)}catch(a){console.log("Error getting Uploads",a.message)}};return m("div",{className:" w-[calc(100vw-3rem)] mx-auto sm:px-12 sm:w-full md:px-0  md:w-[40rem] lg:w-[50rem] xl:px-0 2xl:px-0 xl:min-w-[60rem]  min-w-[1450]:min-w-[65rem] 2xl:min-w-[80.25rem] py-6 flex flex-col gap-6",children:[t("h3",{className:"playlistTitle | font-medium",children:l}),m("div",{className:"relative",children:[t("button",{className:`absolute w-10 p-2 z-[9] -translate-x-1/2 top-1/4 rounded-full rotate-180  justify-center items-center bg-white dark:bg-[#212121] hover:bg-[#e5e5e5] dark:hover:bg-[#4d4d4d] ${i<=0?"hidden":"flex"}`,onClick:a=>{c(i-1),x(a.target.closest("div").querySelector(".slider"))},children:t(I,{className:"dark:fill-[#dfdfdf] fill-[#242424] "})}),t("div",{className:"sliderContainer |  overflow-hidden",children:t("div",{className:"slider |  w-min grid grid-flow-col grid-cols-none  gap-1 transition-transform",children:r.map(a=>t("div",{className:"videoCard | w-[160px]  sm:max-w-[315px] md:w-[210px] lg:w-[263px] xl:w-[236px] 2xl:w-[210px]",children:t(B,{video:a})},a.id))})}),t("button",{className:`absolute w-10 p-2 z-[9]  translate-x-1/2 right-0 top-1/4 rounded-full  justify-center items-center bg-white dark:bg-[#212121] hover:bg-[#e5e5e5] dark:hover:bg-[#4d4d4d] ${i===n-1?"hidden":"flex"}`,onClick:a=>{c(i+1),x(a.target.closest("div").querySelector(".slider"))},children:t(I,{className:"dark:fill-[#dfdfdf] fill-[#242424] "})})]})]})},D=({id:e})=>{var p,i,c,n,f,d,x,w;const[l,h]=s.useState([]);s.useEffect(()=>{r(e)},[]),s.useEffect(()=>{},[l]);const r=async a=>{try{const u=await N(`channels?part=snippet&part=statistics&id=${a}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);await h(u.items[0])}catch(u){console.log("Error",u)}};return t("div",{className:"videoCard | w-[10rem]  sm:max-w-[19.688rem] md:w-[13.125rem] lg:w-[16.438rem] xl:w-[14.75rem] 2xl:w-[13.125rem]",children:m("div",{className:"flex flex-col w-[13.125rem]",children:[t("div",{className:"channelImage | w-full flex justify-center  ",children:t(y,{to:`/channels/${e}`,children:t("div",{className:"w-[6.438rem] aspect-square overflow-hidden rounded-full",children:t("img",{loading:"lazy",src:((c=(i=(p=l==null?void 0:l.snippet)==null?void 0:p.thumbnails)==null?void 0:i.medium)==null?void 0:c.url)||((d=(f=(n=l==null?void 0:l.snippet)==null?void 0:n.thumbnails)==null?void 0:f.high)==null?void 0:d.url),alt:""})})})}),m("div",{className:"flex flex-col gap-1 mt-1 text-center ",children:[t(y,{to:`/channels/${e}`,children:t("h4",{className:"font-medium text-sm text-[#0f0f0f] dark:text-[#f1f1f1]",children:(x=l==null?void 0:l.snippet)==null?void 0:x.title})}),m("p",{className:"text-[0.75rem] text-[#606060] dark:text-[#aaa]",children:[t("span",{className:"uppercase text-[0.75rem]",children:V((w=l==null?void 0:l.statistics)==null?void 0:w.subscriberCount,0)})," ",t("span",{children:"subscribers"})]})]}),t("button",{className:"text-xs  rounded-full mt-2 py-2 px-4 self-center bg-[#f2f2f2] dark:bg-[#272727] hover:bg-[#e5e5e5] dark:hover:bg-[#3f3f3f] font-medium text-[#0f0f0f] dark:text-[#f1f1f1]",children:"Subscribe"})]})})},K=()=>{var a,u;const{channelData:e}=s.useContext($),[l,h]=s.useState([]),[r,p]=s.useState(0),[i,c]=s.useState(2),[n,f]=s.useState(null),[d,x]=s.useState("");s.useEffect(()=>{w()},[e]),s.useEffect(()=>{const o=()=>{const g=document.querySelector(".channelSliderContainer").offsetWidth,b=document.querySelector(".channelSlider").offsetWidth;c(Math.ceil(b/g)),x(document.documentElement.innerWidth)};return window.addEventListener("resize",o),r<0&&p(0),r>=i&&p(i-1),n!==null&&(n.style.transform=`translateX(${r<=0?"0":-100*r/i}%)`),()=>{window.removeEventListener("resize",o)}},[r,i,l,d]);const w=async()=>{let o;try{const g=await N(`channelSections?part=snippet&part=contentDetails&channelId=${e.id}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);o=await g.items.filter(b=>b.snippet.type==="multiplechannels"),await h(o[0]),await console.log(g.items.filter(b=>b.snippet.type==="multiplechannels"))}catch(g){console.log("Error getting Playlist",g.massage)}};return m("div",{className:" w-[calc(100vw-3rem)] mx-auto sm:px-12 sm:w-full md:px-0  md:w-[40rem] lg:w-[50rem] xl:px-0 2xl:px-0 xl:min-w-[60rem]  min-w-[1450]:min-w-[65rem] 2xl:min-w-[80.25rem] py-6 flex flex-col gap-6",children:[t("h3",{className:"playlistTitle | font-medium",children:(a=l==null?void 0:l.snippet)==null?void 0:a.title}),m("div",{className:"relative",children:[t("button",{className:`absolute w-10 p-2 z-[9] -translate-x-1/2 top-1/4 rounded-full rotate-180  justify-center items-center bg-white dark:bg-[#212121] hover:bg-[#e5e5e5] dark:hover:bg-[#4d4d4d] ${r<=0?"hidden":"flex"}`,onClick:o=>{p(r-1),f(o.target.closest("div").querySelector(".channelSlider"))},children:t(I,{className:"dark:fill-[#dfdfdf] fill-[#242424] "})}),t("div",{className:"channelSliderContainer |  overflow-hidden",children:t("div",{className:"channelSlider |  w-min grid grid-flow-col grid-cols-none  gap-[0.2rem] transition-transform",children:(u=l==null?void 0:l.contentDetails)==null?void 0:u.channels.map(o=>t(D,{id:o},o))})}),t("button",{className:`absolute w-10 p-2 z-[9]  translate-x-1/2 right-0 top-1/4 rounded-full  justify-center items-center bg-white dark:bg-[#212121] hover:bg-[#e5e5e5] dark:hover:bg-[#4d4d4d] ${r===i-1?"hidden":"flex"}`,onClick:o=>{p(r+1),f(o.target.closest("div").querySelector(".channelSlider"))},children:t(I,{className:"dark:fill-[#dfdfdf] fill-[#242424] "})})]})]})},re=()=>{var i,c,n,f;const{channelData:e,setProgress:l}=s.useContext($),[h,r]=s.useState([]);s.useEffect(()=>{p()},[e]);const p=async()=>{try{l(80);const d=await N(`playlists?part=contentDetails&part=id&part=snippet&channelId=${e.id}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);r(d.items.filter(x=>x.contentDetails.itemCount>=12))}catch(d){console.log("Error getting Playlist",d.massage)}l(100)};return m("div",{className:"sm:max-w-[calc(100vw-72px)] xl:max-w-[61rem] 2xl:max-w-[80.25rem]  divide-y-[1px] divide-[#e5e5e5] dark:divide-[#3f3f3f]",children:[((c=(i=e==null?void 0:e.brandingSettings)==null?void 0:i.channel)==null?void 0:c.unsubscribedTrailer)&&t(O,{}),t(U,{playlistId:(f=(n=e==null?void 0:e.contentDetails)==null?void 0:n.relatedPlaylists)==null?void 0:f.uploads,playlistTitle:"Videos"}),(h==null?void 0:h.length)>0?h.map(d=>t(U,{playlistId:d.id,playlistTitle:d.snippet.title},d.id)):"",t(K,{})]})};export{re as default};
