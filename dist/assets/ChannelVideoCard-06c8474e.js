import{r as s,_ as T,C as $,a as t,j as r,L as k}from"./index-97ce0fac.js";import{f as B}from"./api-8804df91.js";import{d as R}from"./MoreVert-02c8a8a7.js";import U from"./VideoLengthTimer-6a362907.js";import{S as O}from"./index-ac20a466.js";/* empty css                 */import{N as z}from"./index-1dff0b23.js";import{i as M,l as S}from"./index-f60fa138.js";import{f as Y}from"./index-307d66e5.js";import"./axios-aba6f0e0.js";const K=s.lazy(()=>T(()=>import("./SharePopup-d07140af.js"),["assets/SharePopup-d07140af.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/ReactToastify-e2bb595c.js","assets/ReactToastify-f2ebcc7d.css"])),ee=({video:e})=>{var m,u,f,d,b,h,x,g,w,N,_;const i=s.useRef(),{mouseDownAction:I,mouseUpAction:y}=s.useContext($),[c,A]=s.useState(""),[C,D]=s.useState(""),[E,L]=s.useState(""),[o,p]=s.useState(!1);s.useEffect(()=>{var a;j(),P((a=e==null?void 0:e.snippet)==null?void 0:a.publishedAt)},[]);const P=a=>{const l=Y(new Date(a));D(l)},j=async()=>{var a,l;try{const n=await B(`videos?part=snippet&part=statistics&part=contentDetails&id=${(l=(a=e==null?void 0:e.snippet)==null?void 0:a.resourceId)==null?void 0:l.videoId}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);A(n.items[0].statistics);const V=M({start:0,end:S.toSeconds(S.parse(n.items[0].contentDetails.duration))*1e3});L(V)}catch(n){console.log("errror",n.message)}};return t("div",{className:" flex justify-between video_card w-[90%] sm:w-[210px] md:w-[305.9983px] ",children:r("div",{className:" group flex flex-col w-full",children:[t(k,{className:"max-w-full",to:`/video/${(m=e==null?void 0:e.snippet)==null?void 0:m.resourceId.videoId}`,children:r("div",{className:"thumbnail relative  bg-[#e5e5e5] dark:bg-[#272727] rounded-[12px]   aspect-video",children:[t("img",{loading:"lazy",src:((d=(f=(u=e==null?void 0:e.snippet)==null?void 0:u.thumbnails)==null?void 0:f.maxres)==null?void 0:d.url)||((x=(h=(b=e==null?void 0:e.snippet)==null?void 0:b.thumbnails)==null?void 0:h.medium)==null?void 0:x.url),alt:"",className:"w-full rounded-[12px] aspect-video  bg-[#e5e5e5] dark:bg-[#272727] border-[#272727]"})||t(O,{circle:!0,width:"36px",height:"36px",baseColor:document.documentElement.classList.contains("dark")?"#272727":"#e5e5e5",enableAnimation:!1}),((g=e.snippet)==null?void 0:g.liveBroadcastContent)==="live"?t(IsLive,{}):t(U,{time:E})]})}),t("div",{className:"details flex gap-4 mt-2",children:r("div",{className:"flex flex-col justify-between leading-snug w-full relative",children:[r("div",{className:"flex mb-1 pr-7",children:[t(k,{className:"w-full ",title:e==null?void 0:e.snippet.title,to:`/video/${(w=e==null?void 0:e.snippet)==null?void 0:w.resourceId.videoId}`,children:t("div",{className:"flex w-full",children:t("p",{className:"line-clamp font-medium w-full text-sm text-[#0f0f0f] dark:text-white",children:(N=e==null?void 0:e.snippet)==null?void 0:N.title})})}),r("div",{className:"button | h-fit ",ref:i,children:[t("button",{className:" js_EventBtn | sm:opacity-0  group-hover:opacity-100 focus-visible:opacity-100 absolute top-[-18%] right-[-4%] w-[35.7px] h-[35.7px] rounded-full flex items-center justify-center  border-transparent focus-visible:outline-none focus-visible:bg-[rgba(227,227,227,0.7)] dark:focus-visible:bg-[rgba(39,39,39,0.7)] active:bg-[rgba(227,227,227,0.7)] dark:active:bg-[rgba(39,39,39,0.7)] border-[1px]",onClick:()=>p(!o),onMouseUp:y,onMouseDown:I,children:t(R,{className:"text-black dark:text-white  pointer-events-none"})}),t(s.Suspense,{fallback:t("div",{}),children:t(K,{shareRef:i,setOpen:p,open:o,video:(_=e==null?void 0:e.snippet)==null?void 0:_.resourceId.videoId})})]})]}),t("div",{className:"flex flex-col text-[#606060] dark:text-[#aaaaaa] text-xs  ",children:c&&r("p",{children:[r("span",{className:"",children:[`${z(c.viewCount,0)} `,"views"]}),t("span",{className:'before:content-["â€¢"] before:leading-3 before:text-xs before:mx-1 relative before:top-[-10px]',children:`${C} ago`})]})})]})})]})})};export{ee as default};
