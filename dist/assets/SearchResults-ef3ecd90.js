import{r as s,_ as n,C as k,e as v,j as S,a as t}from"./index-4483838d.js";import{f}from"./api-8804df91.js";import{V as w}from"./VideoCardSkeleton-6af0e9c0.js";import"./axios-aba6f0e0.js";import"./index-26f5842a.js";/* empty css                 */const T=s.lazy(()=>n(()=>import("./Sidebar-fdf91e6d.js"),["assets/Sidebar-fdf91e6d.js","assets/index-4483838d.js","assets/index-1f6290d0.css","assets/Constants-c70401ee.js","assets/MylikesActive-4396e479.js","assets/SigninBtn-bb89ba13.js","assets/config-42586af4.js"])),P=s.lazy(()=>n(()=>import("./SearchResultsCard-e4db80c9.js"),["assets/SearchResultsCard-e4db80c9.js","assets/index-4483838d.js","assets/index-1f6290d0.css","assets/index-26f5842a.js","assets/index-f28fc07c.js","assets/index-307d66e5.js","assets/index-f60fa138.js","assets/MoreVert-a588e145.js","assets/api-8804df91.js","assets/axios-aba6f0e0.js","assets/skeleton-43978ee9.css"])),b=s.lazy(()=>n(()=>import("./SkeletonTypeChannel-5d0a2291.js"),["assets/SkeletonTypeChannel-5d0a2291.js","assets/index-4483838d.js","assets/index-1f6290d0.css","assets/index-26f5842a.js","assets/skeleton-43978ee9.css"])),C=s.lazy(()=>n(()=>import("./SkeletonTypeVideo-1cf0cc3d.js"),["assets/SkeletonTypeVideo-1cf0cc3d.js","assets/index-4483838d.js","assets/index-1f6290d0.css","assets/index-26f5842a.js","assets/skeleton-43978ee9.css"])),q=()=>{const a=s.useRef(null),{setProgress:i,loading:m,setLoading:u,rateLimited:c,sidebarExpanded:h}=s.useContext(k),[r,d]=s.useState([]),[x,p]=s.useState(null);let{searchQuery:l}=v();const g=["","","","","","","","","","","","",""];s.useEffect(()=>{u(!0),y()},[]),s.useEffect(()=>{_()},[l]);const y=()=>{document.title=`${l} - YouTube Clone`,document.querySelector("meta[name=description]")&&document.head.removeChild(document.querySelector("meta[name=description]")),document.querySelector('meta[name="keywords"]')&&document.head.removeChild(document.querySelector("meta[name=keywords]")),document.querySelectorAll('meta[name="tags"]')&&document.querySelectorAll('meta[name="tags"]').forEach(o=>{document.head.removeChild(o)})},_=async()=>{i(80);try{const e=await f(`search?part=snippet&q=${l}&maxResults=10&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);u(!1),d(e.items),p(e.nextPageToken)}catch(e){e.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):e.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):e.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",e)}i(100)},R=async()=>{try{const e=await f(`search?part=snippet&q=${l}&pageToken=${x}&maxResults=10&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);d(o=>[...o,...e.items]),p(e.nextPageToken)}catch(e){e.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):e.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):e.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",e)}},E=s.useCallback(e=>{e&&(a.current&&a.current.disconnect(),a.current=new IntersectionObserver(o=>{o[0].isIntersecting&&R()}),a.current.observe(e))},[r]);return S("div",{className:"flex min-h-[calc(100vh-56px)] px-6 sm:px-0 xl:pr-5 ",children:[!c&&t(s.Suspense,{fallback:t("div",{}),children:t(T,{})}),m&&t("div",{className:"flex h-full flex-wrap justify-center gap-y-7 gap-2  py-5 mx-auto  max-w-[2500px] min-w-[375px]  overflow-auto",children:g.forEach((e,o)=>t(w,{},o))}),!m&&t("div",{className:` w-full ml-0  items-center sm:py-5  mx-auto overflow-auto ${c?"w-screen ml-0":"max-w-[2500px]"} ${h?"ml-0 sm:ml-[57px] lg:ml-[240px] ":" ml-0 sm:ml-[72px] "} `,children:t("div",{className:"mx-auto w-full sm:w-[90%] xl:w-[960px] 2xl:w-[1096px] flex flex-col gap-y-4",children:c?navigate("/rateLimited"):(r==null?void 0:r.length)>0?r.map((e,o)=>t("div",{className:"w-full ",ref:o===r.length-1?E:null,children:t(s.Suspense,{fallback:e.id.kind==="youtube#channel"?t(s.Suspense,{fallback:"",children:t(b,{video:e})}):t(s.Suspense,{fallback:"",children:t(C,{video:e})}),children:t(P,{video:e})})},o)):t("p",{className:"w-full text-center text-[#0f0f0f] dark:text-[#f1f1f1]",children:"Nothing to show. Try searching for something else."})})})]})};export{q as default};
