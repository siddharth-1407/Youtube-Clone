import{r as s,_ as d,u as L,C as b,j as A,a as t}from"./index-97ce0fac.js";import{V as y}from"./VideoCardSkeleton-3672d857.js";import{f as E}from"./api-8804df91.js";import"./index-ac20a466.js";/* empty css                 */import"./axios-aba6f0e0.js";const N=s.lazy(()=>d(()=>import("./NoConnection-c0249079.js"),["assets/NoConnection-c0249079.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css"])),I=s.lazy(()=>d(()=>import("./VideoCard-b567f1c8.js"),["assets/VideoCard-b567f1c8.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/index-9160f5fe.js","assets/index-1dff0b23.js","assets/api-8804df91.js","assets/axios-aba6f0e0.js","assets/index-f60fa138.js","assets/index-307d66e5.js","assets/MoreVert-02c8a8a7.js","assets/index-ac20a466.js","assets/skeleton-43978ee9.css"])),V=s.lazy(()=>d(()=>import("./Sidebar-1d6db731.js"),["assets/Sidebar-1d6db731.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/Constants-3d8e1d0d.js","assets/MylikesActive-7915b99c.js","assets/SigninBtn-989d417a.js","assets/config-42586af4.js"])),U=()=>{const R=L(),{searchResults:_,rateLimited:l,loading:i,setLoading:c,selectCategory:u,setSelectCategory:v,setRateLimited:r,nextPageToken:m,setNextPageToken:p,setSearchResults:f,setProgress:a,sidebarExpanded:g,setSidebarExpanded:h,location:w,getLocation:C,setIsOnline:n,isOnline:k}=s.useContext(b);s.useEffect(()=>{v("Home"),S(),h(!0),window.innerWidth<=1024&&h(!1)},[]),s.useEffect(()=>(window.addEventListener("scroll",x),()=>{window.removeEventListener("scroll",x)}),[m,i]),s.useEffect(()=>{navigator.onLine?(n(!0),T()):n(!1)},[u]);const S=()=>{document.title="YouTube Clone",document.querySelector("meta[name=description]")&&document.head.removeChild(document.querySelector("meta[name=description]")),document.querySelector('meta[name="keywords"]')&&document.head.removeChild(document.querySelector("meta[name=keywords]")),document.querySelectorAll('meta[name="tags"]')&&document.querySelectorAll('meta[name="tags"]').forEach(o=>{document.head.removeChild(o)})},T=async()=>{document.documentElement.scrollTop=0,c(!0),a(80);try{const e=await C(),o=await E(`videos?part=contentDetails&part=snippet&part=statistics&chart=mostPopular&maxResults=16&regionCode=${e}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);c(!1),r(!1),f(o.items),p(o.nextPageToken)}catch(e){e.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):e.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):e.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",e),c(!1),r(!0)}a(100)},P=async()=>{a(80);try{const e=await E(`videos?part=snippet&chart=mostPopular&maxResults=16&pageToken=${m}&
			regionCode=${w}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);r(!1),p(e.nextPageToken),f(o=>[...o,...e.items])}catch(e){e.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):e.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):e.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",e),r(!0)}a(100)},x=async()=>{if(window.innerHeight+document.documentElement.scrollTop+1===document.documentElement.scrollHeight&&m)try{a(80),navigator.onLine?(n(!0),P(u)):n(!1),a(100)}catch(e){console.log(e)}},O=["","","","","","","","","","","","","","","","",""];return A("div",{className:"flex h-full",children:[!l&&t(s.Suspense,{fallback:t("div",{}),children:t(V,{})}),i&&t("div",{className:`flex flex-wrap justify-center gap-y-7 gap-2 max-w-[2500px] min-w-[375px] h-full overflow-auto  ${g?"ml-0 sm:ml-[57px]  lg:ml-[240px] ":" ml-0 sm:ml-[72px]"}`,children:O.map((e,o)=>t(y,{},o))}),!i&&t("div",{className:`main-feed | h-full p-6 ml-0 flex flex-wrap justify-center gap-y-7 gap-x-2 sm:px-0 sm:py-5 mx-auto overflow-auto text-white ${l?"w-screen ml-[0px]":"max-w-[2500px]"} ${g?"ml-0 sm:ml-[57px]  lg:ml-[240px] ":" ml-0 sm:ml-[72px] "} `,children:k?l?R("/rateLimited"):_.map((e,o)=>t("div",{className:"videoCard ",children:t(s.Suspense,{fallback:t(y,{}),children:t(I,{video:e})})},o)):t(s.Suspense,{fallback:"",children:t(N,{})})})]})};export{U as default};
