import{r as o,_ as p,j as h,a as t}from"./index-97ce0fac.js";import{f as m}from"./api-8804df91.js";import"./axios-aba6f0e0.js";const g=o.lazy(()=>p(()=>import("./Comment-a7d86aa5.js").then(n=>n.C),["assets/Comment-a7d86aa5.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/ArrowForward-53bb19ac.js","assets/config-42586af4.js","assets/index-1dff0b23.js","assets/Avatar-39541f5e.js","assets/index-307d66e5.js"])),R=o.lazy(()=>p(()=>import("./CommentForm-abe04697.js"),["assets/CommentForm-abe04697.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/config-42586af4.js","assets/Avatar-39541f5e.js"])),v=({id:n})=>{const a=o.useRef(null),[s,l]=o.useState([]),[c,i]=o.useState(null);o.useEffect(()=>{d()},[]);const d=async()=>{try{const e=await m(`commentThreads?part=snippet&part=id&part=replies&order=relevance&textFormat=html&videoId=${n}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);l(e.items),i(e.nextPageToken)}catch(e){e.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):e.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):e.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",e)}},u=async()=>{try{if(c){const e=await m(`commentThreads?part=snippet&part=id&part=replies&order=relevance&pageToken=${c}&textFormat=html&videoId=${n}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);l(r=>[...r,...e.items]),i(e.nextPageToken)}}catch(e){e.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):e.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):e.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",e)}},f=o.useCallback(e=>{e&&(a.current&&a.current.disconnect(),a.current=new IntersectionObserver(r=>{r[0].isIntersecting&&u()}),a.current.observe(e))},[s]);return h("div",{className:"commentsSection | pl-3 pr-5 lg:px-0 mt-4 flex flex-col gap-8 ",children:[t("div",{children:t(o.Suspense,{fallback:t("div",{}),children:t(R,{})})}),t("div",{className:"comments | flex flex-col gap-4",children:s.length>0&&s.map((e,r)=>t(o.Suspense,{fallback:t("div",{}),children:t("div",{ref:r===(s==null?void 0:s.length)-1?f:null,children:t(g,{comment:e})})},e.id))})]})};export{v as default};
