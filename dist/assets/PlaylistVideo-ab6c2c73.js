import{r as s,C as H,j as a,L as o,a as t}from"./index-97ce0fac.js";import{N as J}from"./index-1dff0b23.js";import{i as Q,l as U}from"./index-f60fa138.js";import{d as W}from"./MoreVert-02c8a8a7.js";/* empty css                 */import{f as V}from"./api-8804df91.js";import{I as X}from"./Live-5fe53068.js";import Z from"./VideoLengthTimer-6a362907.js";import ee from"./SharePopup-d07140af.js";import{f as te}from"./index-307d66e5.js";import"./axios-aba6f0e0.js";import"./ReactToastify-e2bb595c.js";const de=({video:e,index:L})=>{var h,d,x,b,g,w,N,I,k,y,D,v,A,S,$,P,_,E;const c=s.useRef(),[i,p]=s.useState(!1),{mouseUpAction:f,mouseDownAction:u}=s.useContext(H),[se,B]=s.useState(""),[m,M]=s.useState(!1),[Y,O]=s.useState([]),[R,K]=s.useState("");s.useEffect(()=>{z(e.snippet.channelId),q(e.snippet.resourceId.videoId),F(e.snippet.publishedAt)},[e.id.videoId]);const z=r=>{V(`channels?part=snippet&id=${r}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`).then(({items:n})=>{B(n)})},q=async r=>{var n,C,T,j;try{const l=await V(`videos?part=statistics&part=contentDetails&id=${r}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);M(J((C=(n=l.items[0])==null?void 0:n.statistics)==null?void 0:C.viewCount,1));const G=Q({start:0,end:U.toSeconds(U.parse((j=(T=l.items[0])==null?void 0:T.contentDetails)==null?void 0:j.duration))*1e3});O(G)}catch(l){console.log(l)}},F=r=>{const n=te(new Date(r));K(n)};return a("div",{className:"group w-full flex flex-col sm:flex-row gap-4 p-1 hover:bg-[#e5e5e5] hover:dark:bg-[#272727] rounded-[12px] border-[1px] border-transparent",onMouseDown:u,onMouseUp:f,children:[a(o,{className:"max-w-full h-fit focus-visible:outline-none focus-visible:scale-110 transition-transform flex",to:`/video/${(d=(h=e==null?void 0:e.snippet)==null?void 0:h.resourceId)==null?void 0:d.videoId}`,children:[t("div",{className:"justify-center items-center pl-1 pr-3 text-[#606060] dark:text-[#aaa] hidden lg:flex",children:L+1}),a("div",{className:"thumbnail | w-full relative flex justify-center items-center bg-[#e5e5e5] dark:bg-[#272727] rounded-[12px] sm:w-auto  sm:h-[6.563rem] aspect-video overflow-hidden ",children:[t("img",{loading:"lazy",src:((g=(b=(x=e==null?void 0:e.snippet)==null?void 0:x.thumbnails)==null?void 0:b.medium)==null?void 0:g.url)||((I=(N=(w=e==null?void 0:e.snippet)==null?void 0:w.thumbnails)==null?void 0:N.high)==null?void 0:I.url),alt:"","aria-hidden":"true",className:"w-full aspect-video bg-[#e5e5e5] dark:bg-[#272727] "}),((k=e.snippet)==null?void 0:k.liveBroadcastContent)==="live"?t(X,{}):t(Z,{time:Y})]})]}),t("div",{className:"flex flex-col gap-2  leading-snug w-full relative pointer-events-none",children:a("div",{className:"flex flex-col  flex-1 ",children:[a("div",{className:"flex relative ",children:[t(o,{className:"w-[90%] pr-1 pb-2 pointer-events-auto",to:`/video/${(D=(y=e==null?void 0:e.snippet)==null?void 0:y.resourceId)==null?void 0:D.videoId}`,children:t("div",{className:"flex w-full",children:t("h2",{className:"line-clamp font-semibold w-full text-base text-[#0f0f0f] dark:text-white",children:(v=e==null?void 0:e.snippet)==null?void 0:v.title})})}),a("div",{className:"button | absolute right-0 w-[39.7px] h-[39.7px] pointer-events-auto",ref:c,children:[t("button",{className:`js_EventBtn | opacity-95 md:opacity-0  group-hover:opacity-100 focus-visible:opacity-100 absolute w-[39.7px] h-[39.7px] rounded-full flex items-center justify-center border-transparent  active:bg-[#e3e3e3] dark:active:bg-[#272727] border-[1px]  focus-visible:outline-none focus-visible:dark:bg-[#272727] focus-visible:bg-[#e3e3e3] ${i&&"opacity-100"}`,onClick:()=>p(!i),onMouseUp:f,onMouseDown:u,children:t(W,{className:"text-black dark:text-white  pointer-events-none"})}),t(ee,{open:i,setOpen:p,video:(S=(A=e==null?void 0:e.snippet)==null?void 0:A.resourceId)==null?void 0:S.videoId,shareRef:c})]})]}),m&&a("p",{className:"h-1/2 flex flex-wrap text-[0.8rem] text-[#606060] dark:text-[#aaaaaa]  line-clamp-custom",children:[t(o,{to:`/channels/${($=e==null?void 0:e.snippet)==null?void 0:$.channelId}`,className:"pointer-events-auto hover:text-[#0f0f0f] dark:hover:text-[#f1f1f1] focus-visible:dark:text-[#f1f1f1] focus-visible:outline-none focus-visible:text-[#0f0f0f] transition line-clamp-custom",children:(P=e==null?void 0:e.snippet)==null?void 0:P.channelTitle}),a(o,{to:`/video/${(E=(_=e==null?void 0:e.snippet)==null?void 0:_.resourceId)==null?void 0:E.videoId}`,className:"flex flex-wrap pointer-events-auto focus-visible:outline-none",children:[t("span",{className:'before:content-["•"] before:leading-3 before:text-xs before:mx-1 relative before:top-[-10px] line-clamp-custom',children:`${m} views`}),t("span",{className:'before:content-["•"] before:leading-3 before:text-xs before:mx-1 relative before:top-[-10px] line-clamp-custom',children:`${R} ago`})]})]})]})})]})};export{de as default};
