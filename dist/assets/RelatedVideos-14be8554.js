import{r as t,_ as T,u as k,e as E,j as V,a}from"./index-97ce0fac.js";import{f}from"./api-8804df91.js";import"./axios-aba6f0e0.js";const y=t.lazy(()=>T(()=>import("./RelatedVideosCard-0502acc4.js"),["assets/RelatedVideosCard-0502acc4.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/index-ac20a466.js","assets/api-8804df91.js","assets/axios-aba6f0e0.js","assets/index-1dff0b23.js","assets/index-f60fa138.js","assets/index-307d66e5.js","assets/VideoLengthTimer-6a362907.js","assets/MoreVert-02c8a8a7.js","assets/skeleton-43978ee9.css"])),S=()=>{const i=k(),o=t.useRef(null),[p,l]=t.useState(!0),[g,c]=t.useState(!1),[s,d]=t.useState([]),[u,m]=t.useState(null),[v,h]=t.useState(null),{id:n}=E();t.useEffect(()=>{navigator.onLine&&x()},[n]);const x=async()=>{try{const e=await f(`search?part=snippet&maxResults=12&relatedToVideoId=${n}&type=video&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);d(e.items),m(e.nextPageToken),l(!1)}catch(e){console.log("Error",e),i("/rateLimited")}},P=async()=>{if(u!==v)try{c(!0);const e=await f(`search?part=snippet&maxResults=12&relatedToVideoId=${n}&pageToken=${u}&type=video&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);d(r=>[...r,...e.items]),m(e.nextPageToken),h(e.prevPageToken),l(!1),c(!1)}catch(e){console.log("Error",e),i("/rateLimited")}},_=t.useCallback(e=>{e&&(o.current&&o.current.disconnect(),o.current=new IntersectionObserver(r=>{r[0].isIntersecting&&P()}),o.current.observe(e))},[s]);return V("div",{className:"relatedVideos | h-fit my-4 lg:mb-4 lg:m-0 px-3 sm:px-0 flex flex-col gap-2 min-w-full min-[1060px]:min-w-[19.75rem] min-[1060px]:max-w-[25.125rem]  ",children:[!p&&s.length>0?s.map((e,r)=>a("div",{className:"relatedVideo",children:a(t.Suspense,{fallback:a("div",{}),children:a("div",{ref:r===(s==null?void 0:s.length)-1?_:null,children:a(y,{video:e})})})},r)):"",g&&a("div",{className:"loaderWrapper | flex justify-center mt-4",children:a("div",{className:"loader"})})]})};export{S as default};
