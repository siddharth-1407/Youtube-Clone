import{r as a,_ as C,e as B,u as H,C as K,j as n,a as s}from"./index-97ce0fac.js";import{f as m}from"./api-8804df91.js";import q from"./NoConnection-c0249079.js";import"./axios-aba6f0e0.js";const G=a.lazy(()=>C(()=>import("./PlaylistVideo-ab6c2c73.js"),["assets/PlaylistVideo-ab6c2c73.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/index-1dff0b23.js","assets/index-f60fa138.js","assets/index-307d66e5.js","assets/MoreVert-02c8a8a7.js","assets/api-8804df91.js","assets/axios-aba6f0e0.js","assets/Live-5fe53068.js","assets/VideoLengthTimer-6a362907.js","assets/SharePopup-d07140af.js","assets/ReactToastify-e2bb595c.js","assets/ReactToastify-f2ebcc7d.css","assets/skeleton-43978ee9.css"])),J=a.lazy(()=>C(()=>import("./Sidebar-1d6db731.js"),["assets/Sidebar-1d6db731.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/Constants-3d8e1d0d.js","assets/MylikesActive-7915b99c.js","assets/SigninBtn-989d417a.js","assets/config-42586af4.js"])),Z=()=>{var g,h,v,E,w,b,_,N,P,R,y,k,I,T,O,S;const{id:r}=B(),[L,p]=a.useState([]),[u,f]=a.useState(null),[e,A]=a.useState(null),$=H(),{rateLimited:o,setSelectCategory:D,setRateLimited:c,setProgress:l,sidebarExpanded:U,setSidebarExpanded:V,isOnline:Y,setIsOnline:i}=a.useContext(K);a.useEffect(()=>{D(null),V(!0),navigator.onLine?(i(!0),j(),F()):i(!1)},[r]);const j=async()=>{try{l(80);const t=await m(`playlists?part=snippet&part=contentDetails&id=${r}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);A(t.items[0])}catch(t){t.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):t.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):t.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",t)}l(100)},F=async()=>{document.documentElement.scrollTop=0,l(80);try{const t=await m(`playlistItems?part=snippet&part=id&part=contentDetails&maxResults=10&playlistId=${r}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);c(!1),f(t.nextPageToken),p(t.items)}catch(t){t.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):t.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):t.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",t),c(!0)}l(100)},z=async()=>{l(80);try{const t=await m(`playlistItems?part=snippet&part=id&part=contentDetails&maxResults=6&pageToken=${u}&playlistId=${r}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);f(t.nextPageToken),p(d=>[...d,...t.items])}catch{c(!0)}l(100)},x=async()=>{if(window.innerHeight+document.documentElement.scrollTop+1>=document.documentElement.scrollHeight)try{l(80),navigator.onLine?(i(!0),z()):i(!1),l(100)}catch(t){console.log(t)}};return a.useEffect(()=>(window.addEventListener("scroll",x),()=>{window.removeEventListener("scroll",x)}),[u]),a.useEffect(()=>{},[e]),n("div",{className:"flex min-h-[calc(100vh-56px)]",children:[!o&&s(a.Suspense,{fallback:s("div",{}),children:s(J,{})}),Y?n("div",{className:`main-feed | px-6 ml-0 sm:pr-0 sm:pl-5 sm:mt-6 md:px-6 flex flex-col lg:flex-row  flex-wrap justify-center lg:justify-start  gap-y-7   text-white  ${o?"w-screen ml-[0px]":`${U?"w-full lg:w-[calc(100%-240px)]":"w-full sm:w-[calc(100%-50px)] md:w-[calc(100%-69px)]"}`}
                    mx-auto sm:ml-auto sm:mr-0`,children:[s("div",{className:"flex w-full lg:w-[360px]",children:s("div",{className:"playlistHero | relative rounded-[14px] overflow-hidden  w-full p-6 lg:w-[360px] h-60 lg:h-[calc(100%-6rem)] lg:fixed bg-gradient-to-b from-indigo-700 to-transparent ",children:n("div",{className:"container |  flex flex-col gap-4 ",children:[n("div",{className:"flex  ",children:[s("img",{className:"hidden lg:block rounded-[14px] ",src:((v=(h=(g=e==null?void 0:e.snippet)==null?void 0:g.thumbnails)==null?void 0:h.maxres)==null?void 0:v.url)||((b=(w=(E=e==null?void 0:e.snippet)==null?void 0:E.thumbnails)==null?void 0:w.medium)==null?void 0:b.url),alt:""}),s("div",{className:"w-[200%] lg:w-[720px] aspect-video -translate-x-1/4 absolute left-0 top-0 z-[-1] bg-gradient-to-b from-black to-transparent",children:s("img",{src:((P=(N=(_=e==null?void 0:e.snippet)==null?void 0:_.thumbnails)==null?void 0:N.maxres)==null?void 0:P.url)||((k=(y=(R=e==null?void 0:e.snippet)==null?void 0:R.thumbnails)==null?void 0:y.medium)==null?void 0:k.url),alt:"","aria-hidden":!0,className:"blur-[30px] brightness-[70%]"})})]}),s("div",{className:"details ",children:s("h1",{className:"text-[1.6rem] font-semibold",children:(I=e==null?void 0:e.snippet)==null?void 0:I.title})}),n("div",{className:"info text-[#fff]",children:[s("span",{className:'after:content-["â€¢"] after:leading-3 after:text-xs after:mx-1 relative after:top-[-10px] text-sm font-medium',children:(T=e==null?void 0:e.snippet)==null?void 0:T.channelTitle}),s("span",{className:"text-sm",children:`${(O=e==null?void 0:e.contentDetails)==null?void 0:O.itemCount} videos`})]}),s("div",{className:"playlistDescription | text-[rgba(255, 255, 255, 0.7)] text-base",children:(S=e==null?void 0:e.snippet)==null?void 0:S.description})]})})}),s("div",{className:"items | w-full lg:w-[calc(100%-360px)] lg:ml-auto lg:pr-4 lg:pl-2",children:o?$("/rateLimited"):L.map((t,d)=>s("div",{className:"videoCard",children:s(a.Suspense,{fallback:s("div",{}),children:s(G,{video:t,index:d})})},t.id))})]}):s(q,{})]})};export{Z as default};
