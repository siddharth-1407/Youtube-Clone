import{r as s,_ as R,u as L,C as N,j as b,a as t}from"./index-97ce0fac.js";import{V as y}from"./VideoCardSkeleton-3672d857.js";import{f as x}from"./api-8804df91.js";import E from"./NoConnection-c0249079.js";import"./index-ac20a466.js";/* empty css                 */import"./axios-aba6f0e0.js";const A=s.lazy(()=>R(()=>import("./VideoCard-b567f1c8.js"),["assets/VideoCard-b567f1c8.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/index-9160f5fe.js","assets/index-1dff0b23.js","assets/api-8804df91.js","assets/axios-aba6f0e0.js","assets/index-f60fa138.js","assets/index-307d66e5.js","assets/MoreVert-02c8a8a7.js","assets/index-ac20a466.js","assets/skeleton-43978ee9.css"])),$=s.lazy(()=>R(()=>import("./Sidebar-1d6db731.js"),["assets/Sidebar-1d6db731.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/Constants-3d8e1d0d.js","assets/MylikesActive-7915b99c.js","assets/SigninBtn-989d417a.js","assets/config-42586af4.js"])),U=()=>{const v=L(),{searchResults:_,rateLimited:i,loading:c,setSelectCategory:C,setLoading:r,setRateLimited:n,nextPageToken:m,setNextPageToken:d,setSearchResults:u,setProgress:a,location:p,sidebarExpanded:T,setSidebarExpanded:w,setIsOnline:l,isOnline:f}=s.useContext(N);let g="";s.useEffect(()=>{C("Trending"),k(),w(!0),navigator.onLine?(l(!0),S()):l(!1)},[]),s.useEffect(()=>(window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}),[m]);const k=()=>{document.title="Trending - YouTube Clone",document.querySelector("meta[name=description]")&&document.head.removeChild(document.querySelector("meta[name=description]")),document.querySelector('meta[name="keywords"]')&&document.head.removeChild(document.querySelector("meta[name=keywords]")),document.querySelectorAll('meta[name="tags"]')&&document.querySelectorAll('meta[name="tags"]').forEach(o=>{document.head.removeChild(o)})},S=async()=>{try{document.documentElement.scrollTop=0,a(80),r(!0);const e=await x(`videos?part=contentDetails&part=snippet&part=statistics&chart=mostPopular&maxResults=16${g}&regionCode=${p}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);r(!1),n(!1),u(e.items),d(e.nextPageToken)}catch(e){e.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):e.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):e.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",e),r(!1),n(!0)}a(100)},P=async()=>{try{a(80);const e=await x(`videos?part=snippet&chart=mostPopular&maxResults=16${g}&pageToken=${m}&
			regionCode=${p}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);n(!1),d(e.nextPageToken),u(o=>[...o,...e.items])}catch(e){e.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):e.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):e.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",e),r(!1),n(!0)}a(100)},h=async()=>{if(window.innerHeight+document.documentElement.scrollTop+1===document.documentElement.scrollHeight)try{a(80),navigator.onLine?(l(!0),P()):l(!1),a(100)}catch(e){console.log(e)}},O=["","","","","","","","","","","","","","","","",""];return b("div",{className:"flex h-full",children:[!i&&t(s.Suspense,{fallback:t("div",{}),children:t($,{})}),c&&t("div",{className:"flex flex-wrap justify-center gap-y-7 gap-2  py-5 mx-auto  max-w-[2500px] min-w-[375px]  overflow-auto",children:f?O.forEach((e,o)=>t(y,{},o)):t(E,{})}),!c&&t("div",{className:`main-feed | h-full p-6 ml-0 flex flex-wrap justify-center gap-y-7 gap-x-2 sm:px-0 sm:py-5 mx-auto overflow-auto text-white ${i?"w-screen ml-[0px]":"max-w-[2500px]"} ${T?"ml-0 sm:ml-[57px]  lg:ml-[240px] ":" ml-0 sm:ml-[72px] "} `,children:f?i?v("/rateLimited"):_.map((e,o)=>t("div",{className:"videoCard ",children:t(s.Suspense,{fallback:t(y,{}),children:t(A,{video:e})})},o)):t(E,{})})]})};export{U as default};
