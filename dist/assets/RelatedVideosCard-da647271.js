import{r as a,_ as V,C as y,j as n,a as t,L as i}from"./index-4483838d.js";import{S as N}from"./index-26f5842a.js";/* empty css                 */import{f as c}from"./api-8804df91.js";import{N as U}from"./index-f28fc07c.js";import{i as j,l as g}from"./index-f60fa138.js";import Y from"./VideoLengthTimer-41ed4197.js";import{d as B}from"./MoreVert-a588e145.js";import{f as O}from"./index-307d66e5.js";import"./axios-aba6f0e0.js";const R=a.lazy(()=>V(()=>import("./SharePopup-af864640.js"),["assets/SharePopup-af864640.js","assets/index-4483838d.js","assets/index-1f6290d0.css","assets/ReactToastify-22ff13ec.js","assets/ReactToastify-f2ebcc7d.css"])),W=({video:e})=>{var h,f,u,x;const d=a.useRef(),{mouseUpAction:w,mouseDownAction:_}=a.useContext(y),[I,D]=a.useState(!1),[r,A]=a.useState(!1),[E,P]=a.useState([]),[S,k]=a.useState(""),[p,m]=a.useState(!1);a.useEffect(()=>{v(e.snippet.channelId),C(e.id.videoId),T(e.id.videoId),$(e.snippet.publishedAt)},[e.id.videoId]);const v=s=>{c(`channels?part=snippet&id=${s}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`).then(({items:l})=>{D(l)})},C=s=>{c(`videos?part=statistics&id=${s}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`).then(({items:l})=>{var b;const o=U((b=l[0].statistics)==null?void 0:b.viewCount,1);A(o)})},T=s=>{c(`videos?id=${s}&part=contentDetails&key=${{}.VITE_APP_YOUTUBE_API_KEY}`).then(({items:l})=>{const o=j({start:0,end:g.toSeconds(g.parse(l[0].contentDetails.duration))*1e3});P(o)})},$=s=>{const l=O(new Date(s));k(l)};return n("div",{className:"suggested group | w-full flex gap-2 sm:h-[5.875rem]",children:[t("div",{className:"image | flex ",children:t(i,{to:`/video/${e.id.videoId}`,className:"image | w-[10.5rem] rounded-lg overflow-hidden",children:n("div",{className:"relative",children:[t("img",{src:(h=e.snippet.thumbnails)==null?void 0:h.medium.url,alt:""}),t(Y,{time:E})]})})}),t("div",{className:"flex w-full justify-between py-1 min-w-[150px]",children:n("div",{className:"details  | w-full  flex flex-col",children:[n("div",{className:"title | flex",children:[t(i,{className:"w-full pb-1",title:e==null?void 0:e.snippet.title,to:`/video/${e.id.videoId}`,children:t("div",{className:"flex w-full",children:t("p",{className:"line-clamp text-sm font-bold w-full text-[#0f0f0f] dark:text-[#f1f1f1] ",children:r?(f=e==null?void 0:e.snippet)==null?void 0:f.title:t(N,{baseColor:"#272727",highlightColor:"#272727",height:"1.25rem"})})})}),n("div",{className:" w-[26px] h-[26px] relative",ref:d,children:[t("button",{className:" js_EventBtn | group-hover:opacity-100 opacity-0 w-full rounded-full flex items-center justify-center  border-transparent  active:bg-[#e3e3e3] dark:active:bg-[#272727] border-[1px] ",onClick:()=>m(!p),onMouseUp:w,onMouseDown:_,children:t(B,{className:"text-black dark:text-white pointer-events-none"})}),t(a.Suspense,{fallback:t("div",{}),children:t(R,{shareRef:d,setOpen:m,open:p,video:e.id.videoId})})]})]}),n("div",{className:"text-[#606060] dark:text-[#aaaaaa] text-[0.8rem]",children:[t(i,{className:"w-full ",to:`/channels/${e.snippet.channelId}`,title:(u=e==null?void 0:e.snippet)==null?void 0:u.channelTitle,children:I?t("p",{className:"line-clamp  flex items-center gap-2 ",children:t("span",{className:"hover:text-[#606060] dark:hover:text-[#f1f1f1] transition ",children:(x=e==null?void 0:e.snippet)==null?void 0:x.channelTitle})}):t(N,{baseColor:"#272727",highlightColor:"#272727",width:"80%",height:"1.25rem"})}),t(i,{to:`/video/${e.id.videoId}`,className:"line-clamp-custom",children:r&&t("p",{className:"",children:n("span",{className:"line-clamp-custom ",children:[`${r} `,"views",t("span",{className:'before:content-["â€¢"] before:leading-3 before:text-xs before:mx-1 relative before:top-[-10px] ',children:`${S} ago`})]})})})]})]})})]})};export{W as default};
