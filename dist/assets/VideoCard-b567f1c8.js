import{r as s,_ as m,C as Q,a as t,j as l,L as i}from"./index-97ce0fac.js";import{R as W}from"./index-9160f5fe.js";import{N as X}from"./index-1dff0b23.js";import{f as $}from"./api-8804df91.js";import{i as Z,l as I}from"./index-f60fa138.js";import{d as v}from"./MoreVert-02c8a8a7.js";import{S as c}from"./index-ac20a466.js";/* empty css                 */import{f as ee}from"./index-307d66e5.js";import"./axios-aba6f0e0.js";const te=s.lazy(()=>m(()=>import("./IsLive-22a45e03.js"),["assets/IsLive-22a45e03.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/Live-5fe53068.js"])),se=s.lazy(()=>m(()=>import("./VideoLengthTimer-6a362907.js"),["assets/VideoLengthTimer-6a362907.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css"])),ae=s.lazy(()=>m(()=>import("./SharePopup-d07140af.js"),["assets/SharePopup-d07140af.js","assets/index-97ce0fac.js","assets/index-1f6290d0.css","assets/ReactToastify-e2bb595c.js","assets/ReactToastify-f2ebcc7d.css"])),fe=({video:e})=>{var x,g,w,N,y,_,k,E,R,A,S,C,D,O,L,P;const u=s.useRef(),[p,h]=s.useState(!1),{sidebarExpanded:T,mouseUpAction:V,mouseDownAction:j}=s.useContext(Q),[f,U]=s.useState(!1),[o,z]=s.useState(!1),[B,F]=s.useState([]),[M,Y]=s.useState(""),[d,b]=s.useState(!1);s.useEffect(()=>{H(e.snippet.channelId),K(e.id),q(e.snippet.publishedAt)},[e.id]);const H=async r=>{try{const a=await $(`channels?part=snippet&id=${r}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`);U(a.items)}catch(a){a.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):a.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):a.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",a)}},K=async r=>{var a;try{const n=await $(`videos?part=statistics&part=contentDetails&id=${r}&key=${{}.VITE_APP_YOUTUBE_API_KEY}`),G=X((a=n.items[0].statistics)==null?void 0:a.viewCount,1),J=Z({start:0,end:I.toSeconds(I.parse(n.items[0].contentDetails.duration))*1e3});z(G),F(J)}catch(n){n.response.status===403?console.log("ERROR-> Forbidden :  Api Limit most likely!"):n.response.status===400?console.log("ERROR-> OperationNotSupported : Check parameters!"):n.response.status===404?console.log("ERROR-> CommentNotFound, maybe check the id!"):console.log("Error-> ",n)}},q=r=>{const a=ee(new Date(r));Y(a)};return t("div",{className:`group/player flex justify-between video_card sm:p-[5px] min-w-full sm:w-[22.343rem]   ${T===!1?"lg:w-[22rem]":"lg:w-[23rem]"}`,onMouseOver:()=>b(!0),onMouseLeave:()=>b(!1),children:l("div",{className:"flex flex-col w-full",children:[t(i,{className:"max-w-full",to:`/video/${e==null?void 0:e.id}`,children:l("div",{className:" hover:rounded-none transition-all  thumbnail relative bg-[#e5e5e5] dark:bg-[#272727] rounded-[12px] overflow-hidden  min-h-[10rem] aspect-video",children:[t("img",{loading:"lazy",src:((w=(g=(x=e==null?void 0:e.snippet)==null?void 0:x.thumbnails)==null?void 0:g.maxres)==null?void 0:w.url)||((_=(y=(N=e==null?void 0:e.snippet)==null?void 0:N.thumbnails)==null?void 0:y.medium)==null?void 0:_.url),alt:"",className:"w-full  aspect-video  bg-[#e5e5e5] dark:bg-[#272727] border-[#272727] transition-opacity "})||t(c,{circle:!0,width:"36px",height:"36px",baseColor:document.documentElement.classList.contains("dark")?"#272727":"#e5e5e5",enableAnimation:!1}),((k=e.snippet)==null?void 0:k.liveBroadcastContent)==="live"?t(s.Suspense,{fallback:t("div",{}),children:t(te,{})}):t(s.Suspense,{fallback:t("div",{}),children:t(se,{time:B})}),t("div",{className:"player |  rounded-[12px]  group-hover/player:rounded-none transition-all absolute top-0 left-0 w-full h-full  ",children:d&&t(W,{url:`https://www.youtube.com/watch?v=${e==null?void 0:e.id}`,className:" group-hover/player:h-[100%] aspect-video top-0 pointer-events-none",muted:!0,playing:!!d,width:"100%",height:"100%"})})]})}),l("div",{className:"details flex gap-4 mt-2",children:[t("div",{className:"avatar pt-1",children:t(i,{to:`/channels/${(E=e==null?void 0:e.snippet)==null?void 0:E.channelId}`,children:t("div",{className:"  w-[36px] h-[36px] rounded-full overflow-hidden bg-[#e5e5e5] dark:bg-[#272727]",children:f?t("img",{loading:"lazy",className:"bg-[#e5e5e5] dark:bg-[#272727",src:(C=(S=(A=(R=f[0])==null?void 0:R.snippet)==null?void 0:A.thumbnails)==null?void 0:S.default)==null?void 0:C.url,alt:"",width:"68",height:"68"}):t(c,{circle:!0,width:"36px",height:"36px",baseColor:document.documentElement.classList.contains("dark")?"#272727":"#e5e5e5",enableAnimation:!1})})})}),l("div",{className:"flex flex-col justify-between leading-snug w-full relative",children:[l("div",{className:"flex mb-1 pr-9",children:[t(i,{className:"w-full pr-1",title:e==null?void 0:e.snippet.title,to:`/video/${e==null?void 0:e.id}`,children:t("div",{className:"flex w-full",children:t("p",{className:"line-clamp font-semibold w-full text-base text-[#0f0f0f] dark:text-white",children:o?(D=e==null?void 0:e.snippet)==null?void 0:D.title:t(c,{baseColor:document.documentElement.classList.contains("dark")?"#272727":"#e5e5e5",height:"1.25rem",enableAnimation:!1})})})}),l("div",{className:"button | h-fit relative",ref:u,children:[t("button",{className:`js_EventBtn | opacity-0 absolute w-[39.7px] h-[39.7px] rounded-full flex items-center justify-center   border-transparent  active:bg-[#e3e3e3] dark:active:bg-[#272727] group-hover/player:opacity-100 border-[1px] ${p&&"opacity-100"}`,onMouseUp:V,onMouseDown:j,onClick:()=>h(!p),children:t(v,{className:"text-black dark:text-white  pointer-events-none"})}),t(s.Suspense,{fallback:t("div",{}),children:t(ae,{shareRef:u,setOpen:h,open:p,video:e==null?void 0:e.id})})]})]}),l("div",{className:"flex flex-col text-[#606060] dark:text-[#aaaaaa] text-[0.9rem]  ",children:[t(i,{to:`/channels/${(O=e==null?void 0:e.snippet)==null?void 0:O.channelId}`,className:"w-full ",title:(L=e==null?void 0:e.snippet)==null?void 0:L.channelTitle,children:o?t("p",{className:"line-clamp  flex items-center gap-2 ",children:t("span",{className:"hover:text-[#0f0f0f] dark:hover:text-[#f1f1f1] transition ",children:(P=e==null?void 0:e.snippet)==null?void 0:P.channelTitle})}):t(c,{baseColor:document.documentElement.classList.contains("dark")?"#272727":"#e5e5e5",width:"80%",height:"1.25rem",enableAnimation:!1})}),o&&l("p",{className:"flex",children:[l("span",{className:"",children:[`${o} `,"views"]}),t("span",{className:'before:content-["â€¢"] before:leading-3 before:text-xs before:mx-1 relative before:top-[-10px]',children:`${M} ago`})]})]})]})]})]})})};export{fe as default};
